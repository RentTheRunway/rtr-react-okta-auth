import n,{useState as t,createContext as e,useContext as r,useEffect as o}from"react";import{Route as u}from"react-router-dom";import{withAuth as i}from"@okta/okta-react";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var c=function(){return(c=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function a(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]])}return e}function l(n,t,e,r){return new(e||(e=Promise))((function(o,u){function i(n){try{a(r.next(n))}catch(n){u(n)}}function c(n){try{a(r.throw(n))}catch(n){u(n)}}function a(n){n.done?o(n.value):new e((function(t){t(n.value)})).then(i,c)}a((r=r.apply(n,t||[])).next())}))}function s(n,t){var e,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(n,i)}catch(n){u=[6,n],r=0}finally{e=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function f(){var n=t([]),e=n[0],r=n[1],o=t({}),u=o[0],i=o[1],c=t(""),a=c[0],f=c[1],h=t(!1),p=h[0],m=h[1],d=t(null),v=d[0],g=d[1];return{groups:e,user:u,userDisplayName:a,isAuthenticated:p,logout:function(n){return l(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return t="string"==typeof n?n:"/",[4,v.logout(t)];case 1:return e.sent(),w(),[2]}}))}))},login:function(n){var t="string"==typeof n?n:"/";v.login(t)},auth:v,_reAuthorize:function(n){return l(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return g(n.auth),[4,y(n.auth)];case 1:return t.sent(),[2]}}))}))}};function y(n){return l(this,void 0,void 0,(function(){var t,e;return s(this,(function(o){switch(o.label){case 0:return[4,n.isAuthenticated()];case 1:return t=o.sent(),p===t?[3,4]:t?(m(!0),[4,n.getUser()]):[3,3];case 2:return e=o.sent(),i(e),r(e.groups||[]),f(e.given_name+" "+e.family_name),[3,4];case 3:w(),o.label=4;case 4:return[2,t]}}))}))}function w(){m(!1),r([]),f(""),i({})}}var h=e({}),p=h.Provider;function m(n,t){var e=n.map((function(n){return n.toLowerCase().trim()})),r=t.map((function(n){return n.toLowerCase().trim()}));return e.filter((function(n){return r.includes(n)}))}function d(n,t){return m(n,t).length>0}function v(n,t){return m(n,t).length===n.length&&n.length>0}function g(n,t){for(var e=0;e<t.length;e++)if(n.hasOwnProperty(t[e]))return!0;return!1}function y(n,t){var e=t.filter((function(t){return n.hasOwnProperty(t)}));return!!t.length&&e.length===t.length}var w=function(){return n.createElement("div",{"data-testid":"default-unauthorized"},n.createElement("div",{className:"rtr-react-okta-auth-unauthorized"},"Unauthorized"))},b=function(){var n=r(h);return o((function(){if(!n.isAuthenticated){var t=""+window.location.pathname+window.location.search;n.login(t)}}),[]),null},z=function(t){var e=t.groups,o=(t.component,t.unauthorizedComponent,a(t,["groups","component","unauthorizedComponent"])),i=r(h),l=i.isAuthenticated,s=v(e,i.groups),f=l?s?t.component:t.unauthorizedComponent?t.unauthorizedComponent:w:b;return n.createElement(u,c({},o,{component:f}))},A=function(t){var e=t.groups,o=t.component,i=t.unauthorizedComponent,l=a(t,["groups","component","unauthorizedComponent"]),s=r(h),f=s.isAuthenticated,p=d(s.groups,e),m=f?p?o:i||w:b;return n.createElement(u,c({},l,{component:m}))},C=function(n){var t=r(h);return t.isAuthenticated&&v(n.groups,t.groups)?n.children:null},O=function(n){var t=r(h);return t.isAuthenticated&&d(t.groups,n.groups)?n.children:null};function E(e,u,i){return function(a){var f=r(h),p=t(!1),m=p[0],d=p[1],v=""+window.location.origin+window.location.pathname,g=a.auth._config.redirectUri,y=v!==g;return o((function(){y&&function(){l(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return i(),[4,f._reAuthorize(a)];case 1:return n.sent(),d(!0),u(),[2]}}))}))}()}),[y]),m?n.createElement(e,c({},a)):null}}function x(n,t,e){return void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),i(E(n,t,e))}var P=function(n){var t=r(h);return t.isAuthenticated&&g(t.user,[n.claim])?n.children:null},k=function(n){var t=r(h);return t.isAuthenticated&&g(t.user,n.claims)?n.children:null},j=function(n){var t=r(h);return t.isAuthenticated&&y(t.user,n.claims)?n.children:null},_=function(t){var e=t.claims,o=t.component,i=t.unauthorizedComponent,l=a(t,["claims","component","unauthorizedComponent"]),s=r(h),f=s.isAuthenticated,p=g(s.user,e),m=f?p?o:i||w:b;return n.createElement(u,c({},l,{component:m}))},S=function(t){return n.createElement(_,c({},t,{claims:[t.claim]}))},T=function(t){var e=t.claims,o=t.component,i=t.unauthorizedComponent,l=a(t,["claims","component","unauthorizedComponent"]),s=r(h),f=s.isAuthenticated,p=y(s.user,e),m=f?p?o:i||w:b;return n.createElement(u,c({},l,{component:m}))},U=function(n){return r(h).isAuthenticated&&n.isTrue()?n.children:null},L=function(t){var e=t.component,o=t.unauthorizedComponent,i=t.isTrue,l=a(t,["component","unauthorizedComponent","isTrue"]),s=r(h).isAuthenticated,f=i(),p=s?f?e:o||w:b;return n.createElement(u,c({},l,{component:p}))};function N(){var n=r(h);return{when:function(t){return!!n.isAuthenticated&&t()}}}export{h as AuthContext,p as AuthContextProvider,L as RouteWhen,T as RouteWhenHasAllClaims,_ as RouteWhenHasAnyClaims,S as RouteWhenHasClaim,z as RouteWhenMemberOfAll,A as RouteWhenMemberOfAny,U as When,j as WhenHasAllClaims,k as WhenHasAnyClaims,P as WhenHasClaim,C as WhenMemberOfAll,O as WhenMemberOfAny,f as useAuthContextState,N as useWhen,x as withAuthAwareness};
//# sourceMappingURL=index.es.js.map
