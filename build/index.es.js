import n,{useState as t,createContext as e,useContext as r,useEffect as o}from"react";import{Route as u}from"react-router-dom";import{withOktaAuth as i,useOktaAuth as a}from"@okta/okta-react";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var c=function(){return(c=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function l(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]])}return e}function s(n,t,e,r){return new(e||(e=Promise))((function(o,u){function i(n){try{c(r.next(n))}catch(n){u(n)}}function a(n){try{c(r.throw(n))}catch(n){u(n)}}function c(n){n.done?o(n.value):new e((function(t){t(n.value)})).then(i,a)}c((r=r.apply(n,t||[])).next())}))}function f(n,t){var e,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(n,i)}catch(n){u=[6,n],r=0}finally{e=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}function h(){var n=t([]),e=n[0],r=n[1],o=t({}),u=o[0],i=o[1],a=t(""),c=a[0],l=a[1],h=t(!1),p=h[0],d=h[1],m=t(null),v=m[0],g=m[1];return{groups:e,user:u,userDisplayName:c,isAuthenticated:p,logout:function(n){return s(this,void 0,void 0,(function(){var t;return f(this,(function(e){switch(e.label){case 0:return t="string"==typeof n?n:"/",[4,v.logout(t)];case 1:return e.sent(),w(),[2]}}))}))},login:function(n){var t="string"==typeof n?n:"/";v.login(t)},auth:v,_applyAuthState:function(n){return s(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return g(n),[4,y(n)];case 1:return t.sent(),[2]}}))}))}};function y(n){return s(this,void 0,void 0,(function(){var t,e,o;return f(this,(function(u){switch(u.label){case 0:return t=n.getAuthState(),e=t.isAuthenticated,p===e?[3,3]:e?(d(!0),[4,n.getUser()]):[3,2];case 1:return o=u.sent(),i(o),r(o.groups||[]),l(o.given_name+" "+o.family_name),[3,3];case 2:w(),u.label=3;case 3:return[2,e]}}))}))}function w(){d(!1),r([]),l(""),i({})}}var p=e({}),d=p.Provider;function m(n,t){var e=n.map((function(n){return n.toLowerCase().trim()})),r=t.map((function(n){return n.toLowerCase().trim()}));return e.filter((function(n){return r.includes(n)}))}function v(n,t){return m(n,t).length>0}function g(n,t){return m(n,t).length===n.length&&n.length>0}function y(n,t){for(var e=0;e<t.length;e++)if(n.hasOwnProperty(t[e]))return!0;return!1}function w(n,t){var e=t.filter((function(t){return n.hasOwnProperty(t)}));return!!t.length&&e.length===t.length}var b=function(){return n.createElement("div",{"data-testid":"default-unauthorized"},n.createElement("div",{className:"rtr-react-okta-auth-unauthorized"},"Unauthorized"))},A=function(){var n=r(p);return o((function(){if(!n.isAuthenticated){var t=""+window.location.pathname+window.location.search;n.login(t)}}),[]),null},z=function(t){var e=t.groups,o=(t.component,t.unauthorizedComponent,l(t,["groups","component","unauthorizedComponent"])),i=r(p),a=i.isAuthenticated,s=g(e,i.groups),f=a?s?t.component:t.unauthorizedComponent?t.unauthorizedComponent:b:A;return n.createElement(u,c({},o,{component:f}))},C=function(t){var e=t.groups,o=t.component,i=t.unauthorizedComponent,a=l(t,["groups","component","unauthorizedComponent"]),s=r(p),f=s.isAuthenticated,h=v(s.groups,e),d=f?h?o:i||b:A;return n.createElement(u,c({},a,{component:d}))},O=function(n){var t=r(p);return t.isAuthenticated&&g(n.groups,t.groups)?n.children:null},E=function(n){var t=r(p);return t.isAuthenticated&&v(t.groups,n.groups)?n.children:null};function P(e,u,l){return void 0===u&&(u=function(){}),void 0===l&&(l=function(){}),i(function(e,u,i){return function(l){var h=a(),d=h.authService,m=h.authState,v=t(!1),g=v[0],y=v[1],w=r(p),b=m&&m.isPending,A=m&&!m.isPending;if(o((function(){var n=""+window.location.origin+window.location.pathname,t=d._config.redirectUri,e=n!==t;A&&e&&function(){s(this,void 0,void 0,(function(){return f(this,(function(n){switch(n.label){case 0:return[4,w._applyAuthState(d)];case 1:return n.sent(),y(!0),[2]}}))}))}()}),[A]),b)return i(),null;if(g)return u(),n.createElement(e,c({},l));return null}}(e,u,l))}var S=function(n){var t=r(p);return t.isAuthenticated&&y(t.user,[n.claim])?n.children:null},x=function(n){var t=r(p);return t.isAuthenticated&&y(t.user,n.claims)?n.children:null},k=function(n){var t=r(p);return t.isAuthenticated&&w(t.user,n.claims)?n.children:null},j=function(t){var e=t.claims,o=t.component,i=t.unauthorizedComponent,a=l(t,["claims","component","unauthorizedComponent"]),s=r(p),f=s.isAuthenticated,h=y(s.user,e),d=f?h?o:i||b:A;return n.createElement(u,c({},a,{component:d}))},_=function(t){return n.createElement(j,c({},t,{claims:[t.claim]}))},T=function(t){var e=t.claims,o=t.component,i=t.unauthorizedComponent,a=l(t,["claims","component","unauthorizedComponent"]),s=r(p),f=s.isAuthenticated,h=w(s.user,e),d=f?h?o:i||b:A;return n.createElement(u,c({},a,{component:d}))},U=function(n){return r(p).isAuthenticated&&n.isTrue()?n.children:null},L=function(t){var e=t.component,o=t.unauthorizedComponent,i=t.isTrue,a=l(t,["component","unauthorizedComponent","isTrue"]),s=r(p).isAuthenticated,f=i(),h=s?f?e:o||b:A;return n.createElement(u,c({},a,{component:h}))};function N(){var n=r(p);return{when:function(t){return!!n.isAuthenticated&&t()}}}export{p as AuthContext,d as AuthContextProvider,L as RouteWhen,T as RouteWhenHasAllClaims,j as RouteWhenHasAnyClaims,_ as RouteWhenHasClaim,z as RouteWhenMemberOfAll,C as RouteWhenMemberOfAny,U as When,k as WhenHasAllClaims,x as WhenHasAnyClaims,S as WhenHasClaim,O as WhenMemberOfAll,E as WhenMemberOfAny,h as useAuthContextState,N as useWhen,P as withAuthAwareness};
//# sourceMappingURL=index.es.js.map
